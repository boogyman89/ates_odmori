{% extends "::base.html.twig" %}

{% block title %} Admin Panel {% endblock title %}

{% block stylesheets %}
<style type="text/css">
    body {
      padding-top: 60px;
      padding-bottom: 40px;
    }
    .sidebar-nav {
      padding: 9px 0;
    }

    @media (max-width: 980px) {
      /* Enable use of floated navbar text */
      .navbar-text.pull-right {
        float: none;
        padding-left: 5px;
        padding-right: 5px;
      }
    }
</style>
{% endblock stylesheets %}


{% block navigation %}
    {{ include('::navigation.html.twig',{ 'user': user, 'roles': roles } ) }}
{% endblock navigation %}

{% block container %}

<div class="row-fluid">
    <div class="span12">
    
        <div class="row-fluid">
            <div class="span6 ">
                <div class="white-box">
                    <h2 class='underline'>Pending Requests</h2>

                    <div class="find-box">
                        <input id="requestWorkerName" type="text" name="name" value="" placeholder="First Name"/>
                        <input id="requestWorkerLastName" type="text" name="lastname" value="" placeholder="Last Name"/>
                        <button id="filterRequestButton" class="btn btn-primary marginTop-10">Find</button>
                    </div>
                    
                    <div id="requestResults">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Status</th>
                                    <th>From</th>
                                    <th>To</th>
                                    <th>Edit</th>
                                    <th>Approve</th>
                                    <th>Reject</th>
                                </tr>   
                            </thead>
                            <tbody>
                                {% for  request in requests %}
                                    <tr> 
                                        <td>{{ request.getUser.getFirstName }} {{ request.getUser.getLastName }}</td>
                                        <td>{{ request.getState }} </td>
                                        <td>{{ request.getStartDate|date('Y-m-d') }} </td> 
                                        <td>{{ request.getEndDate|date('Y-m-d') }}  </td>
                                        <td><a href=' {{ path('edit_request_form', {'id' : request.id}) }}'>Edit</a> </td>
                                        <td><a href=' {{ path('approve_request',  {'id' : request.id}) }}'>Approve</a></td>
                                        <td><a href=' {{ path('reject_request',  {'id' : request.id}) }}'>Reject</a></td>
                                    </tr> 
                                {% endfor %}
                            </tbody>
                        </table>
                        <!--ul id="requestResults">

                        </ul-->
                    </div>
                </div>
            </div>

            <div class="span6">
                <div class="white-box">
                    <h2 class='underline'>Find / Edit Users</h2>
                            
                    <div class="find-box">
                        <input id="searchUserName" type="text" name="name" value="" placeholder="First Name"/>
                        <input id="searchUserLastName" type="text" name="last_name" value="" placeholder="Last Name"/>
                        <button id="findUsersButton" class="btn btn-primary marginTop-10">Find</button>
                    </div>

                    <div id="usersResult">
                    </div>
                    
                </div>
                
                <div class="row-fluid marginTop20">
                    <div class="span12">
                        <div class="white-box">
                            <h2 class='underline'>Users For Approving</h2>

                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Approve</th>
                                        <th>Delete</th>
                                    </tr>   
                                </thead>
                                <tbody>
                                    {% for user in users %}
                                        <tr> 
                                            <td>{{ user.getFirstName }}</td>
                                            <td>{{ user.getLastName }} </td>
                                            <td><a href=' {{ path('approve_user', {'id' : user.id}) }}'>Approve</a> </td> 
                                            <td><a href=' {{ path('delete_user_on_approving', {'id' : user.id}) }}'>Delete</a></td>
                                        </tr> 
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                    
                <div class="row-fluid marginTop20">
                    <div class="span12">
                        <div class="white-box">
                            <h2 class='underline'>Holidays</h2>
                            <a class="btn btn-primary pull-right" href=' {{ path('add_holiday') }} '>Add Holiday</a>
                            
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Date</th>
                                        <th>Edit</th>
                                        <th>Delete</th>
                                    </tr>   
                                </thead>
                                <tbody>
                                    {% for holiday in holidays %}
                                        <tr> 
                                            <td>{{ holiday.getName }}</td>
                                            <td>{{ holiday.getDate|date('Y-m-d') }} </td>
                                            <td><a href=' {{ path('edit_holiday_form', {'id' : holiday.id}) }}'>Edit</a></td> 
                                            <td><a href=' {{ path('delete_holiday',  {'id' : holiday.id}) }}'>Delete</a></td>
                                        </tr> 
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                    
            </div>
        </div>
    </div>        
</div>
    


{% endblock container %}

{% block javascripts %}
        <script src="{{ asset('js/ajax.js') }}"  type="text/javascript"></script>
{% endblock javascripts %}