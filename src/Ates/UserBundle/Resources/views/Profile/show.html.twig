{% extends "::base.html.twig" %}

{% block title %} Welcome {{user.getFirstName}}! {% endblock title %}

{% block stylesheets %}
<style type="text/css">
    body {
      padding-top: 60px;
      padding-bottom: 40px;
    }
    .sidebar-nav {
      padding: 9px 0;
    }

    @media (max-width: 980px) {
      /* Enable use of floated navbar text */
      .navbar-text.pull-right {
        float: none;
        padding-left: 5px;
        padding-right: 5px;
      }
    }
</style>
{% endblock stylesheets %}


{% block navigation %}
    {{ include('::navigation.html.twig',{ 'user': user, 'roles': roles } ) }}
{% endblock navigation %}

{% block container %}


<div class="row-fluid">
    <div class="span3">
      <div class="well sidebar-nav">
        <ul class="nav nav-list">
          <li class="nav-header">Days Off From This Year</li>
          <li class="active"><a href="#">{{ user.noDaysOff }}</a></li>
          
          <li class="nav-header">Days Off From Last Year</li>
          <li class="active"><a href="#">{{user.noDaysOffLastYear }}</a></li>
          
        </ul>
      </div><!--/.well -->
    </div><!--/span-->
    
    <div class="span9">
        
          <select id="requestsFilterProfile">
            <option>all</option>
            <option>pending</option>
            <option>approved</option>
          </select>
          
        <div id="userRequestResults">
          <table class="table table-striped">
            <thead>
              <tr>
                  <th>Status</th>
                  <th>From</th>
                  <th>To</th>
                  <th>Edit / Pdf</th>
              </tr>   
            </thead>
            <tbody>
              {% for request in requests.currentPageResults %}
                    <tr> 
                        <td>{{ request.state }}</td>
                        <td>{{ request.startDate|date('d-m-Y') }} </td>  
                        <td>{{ request.endDate|date('d-m-Y') }} </td> 
                        {% if (request.pdf != null )%}
                            {% set pdfUrl = 'PDF/' ~ request.getPdf %}
                            <td><a href='{{ asset(pdfUrl) }}' target="_blank">PDF</a></td>
                         {% endif %}
                         {% if (request.getState == 'pending' )%}
                            <td><a href=' {{ path('edit_request_form', {'id' : request.id})}}'>Edit</a></td>  
                        {% else %}
                            <td></td>
                        {% endif %}

                    </tr> 
                {% endfor %}
            </tbody>
          </table>
                
            {% if 1 != requests.getNbPages %}
                <div class="pagerfantaProfile">
                    {{ pagerfanta(requests, 'twitter_bootstrap') }}
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock container %}